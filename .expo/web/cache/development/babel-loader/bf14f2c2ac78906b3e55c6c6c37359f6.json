{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nimport * as React from 'react';\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport I18nManager from \"react-native-web/dist/exports/I18nManager\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\n\nvar TabBarIndicator = function (_React$Component) {\n  _inherits(TabBarIndicator, _React$Component);\n\n  var _super = _createSuper(TabBarIndicator);\n\n  function TabBarIndicator() {\n    var _this;\n\n    _classCallCheck(this, TabBarIndicator);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"fadeInIndicator\", function () {\n      var _this$props = _this.props,\n          navigationState = _this$props.navigationState,\n          layout = _this$props.layout,\n          width = _this$props.width,\n          getTabWidth = _this$props.getTabWidth;\n\n      if (!_this.isIndicatorShown && width === 'auto' && layout.width && navigationState.routes.every(function (_, i) {\n        return getTabWidth(i);\n      })) {\n        _this.isIndicatorShown = true;\n        Animated.timing(_this.opacity, {\n          toValue: 1,\n          duration: 150,\n          easing: Easing.in(Easing.linear),\n          useNativeDriver: true\n        }).start();\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"isIndicatorShown\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"opacity\", new Animated.Value(_this.props.width === 'auto' ? 0 : 1));\n\n    _defineProperty(_assertThisInitialized(_this), \"getTranslateX\", function (position, routes, getTabWidth) {\n      var inputRange = routes.map(function (_, i) {\n        return i;\n      });\n      var outputRange = routes.reduce(function (acc, _, i) {\n        if (i === 0) return [0];\n        return [].concat(_toConsumableArray(acc), [acc[i - 1] + getTabWidth(i - 1)]);\n      }, []);\n      var translateX = position.interpolate({\n        inputRange: inputRange,\n        outputRange: outputRange,\n        extrapolate: 'clamp'\n      });\n      return Animated.multiply(translateX, I18nManager.isRTL ? -1 : 1);\n    });\n\n    return _this;\n  }\n\n  _createClass(TabBarIndicator, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.fadeInIndicator();\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      this.fadeInIndicator();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          position = _this$props2.position,\n          navigationState = _this$props2.navigationState,\n          getTabWidth = _this$props2.getTabWidth,\n          width = _this$props2.width,\n          style = _this$props2.style,\n          layout = _this$props2.layout;\n      var routes = navigationState.routes;\n      var transform = [];\n\n      if (layout.width) {\n        var translateX = routes.length > 1 ? this.getTranslateX(position, routes, getTabWidth) : 0;\n        transform.push({\n          translateX: translateX\n        });\n      }\n\n      if (width === 'auto') {\n        var inputRange = routes.map(function (_, i) {\n          return i;\n        });\n        var outputRange = inputRange.map(getTabWidth);\n        transform.push({\n          scaleX: routes.length > 1 ? position.interpolate({\n            inputRange: inputRange,\n            outputRange: outputRange,\n            extrapolate: 'clamp'\n          }) : outputRange[0]\n        }, {\n          translateX: 0.5\n        });\n      }\n\n      return React.createElement(Animated.View, {\n        style: [styles.indicator, {\n          width: width === 'auto' ? 1 : width\n        }, layout.width && Platform.OS !== 'macos' ? {\n          left: 0\n        } : {\n          left: 100 / routes.length * navigationState.index + \"%\"\n        }, {\n          transform: transform\n        }, width === 'auto' ? {\n          opacity: this.opacity\n        } : null, style]\n      });\n    }\n  }]);\n\n  return TabBarIndicator;\n}(React.Component);\n\nexport { TabBarIndicator as default };\nvar styles = StyleSheet.create({\n  indicator: {\n    backgroundColor: '#ffeb3b',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    right: 0,\n    height: 2\n  }\n});","map":{"version":3,"mappings":"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","names":["React","TabBarIndicator","args","_defineProperty","props","navigationState","layout","width","getTabWidth","isIndicatorShown","routes","every","_","i","Animated","timing","opacity","toValue","duration","easing","Easing","in","linear","useNativeDriver","start","Value","position","inputRange","map","outputRange","reduce","acc","translateX","interpolate","extrapolate","multiply","I18nManager","isRTL","componentDidMount","fadeInIndicator","componentDidUpdate","render","style","transform","length","getTranslateX","push","scaleX","View","styles","indicator","Platform","OS","left","index","Component","StyleSheet","create","backgroundColor","bottom","right","height"],"sources":["TabBarIndicator.tsx"],"sourcesContent":["import * as React from 'react';\nimport {\n  Animated,\n  Easing,\n  StyleSheet,\n  I18nManager,\n  StyleProp,\n  ViewStyle,\n  Platform,\n} from 'react-native';\n\nimport type { Route, SceneRendererProps, NavigationState } from './types';\n\nexport type GetTabWidth = (index: number) => number;\n\nexport type Props<T extends Route> = SceneRendererProps & {\n  navigationState: NavigationState<T>;\n  width: string | number;\n  style?: StyleProp<ViewStyle>;\n  getTabWidth: GetTabWidth;\n};\n\nexport default class TabBarIndicator<T extends Route> extends React.Component<\n  Props<T>\n> {\n  componentDidMount() {\n    this.fadeInIndicator();\n  }\n\n  componentDidUpdate() {\n    this.fadeInIndicator();\n  }\n\n  private fadeInIndicator = () => {\n    const { navigationState, layout, width, getTabWidth } = this.props;\n\n    if (\n      !this.isIndicatorShown &&\n      width === 'auto' &&\n      layout.width &&\n      // We should fade-in the indicator when we have widths for all the tab items\n      navigationState.routes.every((_, i) => getTabWidth(i))\n    ) {\n      this.isIndicatorShown = true;\n\n      Animated.timing(this.opacity, {\n        toValue: 1,\n        duration: 150,\n        easing: Easing.in(Easing.linear),\n        useNativeDriver: true,\n      }).start();\n    }\n  };\n\n  private isIndicatorShown = false;\n\n  private opacity = new Animated.Value(this.props.width === 'auto' ? 0 : 1);\n\n  private getTranslateX = (\n    position: Animated.AnimatedInterpolation,\n    routes: Route[],\n    getTabWidth: GetTabWidth\n  ) => {\n    const inputRange = routes.map((_, i) => i);\n\n    // every index contains widths at all previous indices\n    const outputRange = routes.reduce<number[]>((acc, _, i) => {\n      if (i === 0) return [0];\n      return [...acc, acc[i - 1] + getTabWidth(i - 1)];\n    }, []);\n\n    const translateX = position.interpolate({\n      inputRange,\n      outputRange,\n      extrapolate: 'clamp',\n    });\n\n    return Animated.multiply(translateX, I18nManager.isRTL ? -1 : 1);\n  };\n\n  render() {\n    const { position, navigationState, getTabWidth, width, style, layout } =\n      this.props;\n    const { routes } = navigationState;\n\n    const transform = [];\n\n    if (layout.width) {\n      const translateX =\n        routes.length > 1\n          ? this.getTranslateX(position, routes, getTabWidth)\n          : 0;\n\n      transform.push({ translateX });\n    }\n\n    if (width === 'auto') {\n      const inputRange = routes.map((_, i) => i);\n      const outputRange = inputRange.map(getTabWidth);\n\n      transform.push(\n        {\n          scaleX:\n            routes.length > 1\n              ? position.interpolate({\n                  inputRange,\n                  outputRange,\n                  extrapolate: 'clamp',\n                })\n              : outputRange[0],\n        },\n        { translateX: 0.5 }\n      );\n    }\n\n    return (\n      <Animated.View\n        style={[\n          styles.indicator,\n          { width: width === 'auto' ? 1 : width },\n          // If layout is not available, use `left` property for positioning the indicator\n          // This avoids rendering delay until we are able to calculate translateX\n          // If platform is macos use `left` property as `transform` is broken at the moment.\n          // See: https://github.com/microsoft/react-native-macos/issues/280\n          layout.width && Platform.OS !== 'macos'\n            ? { left: 0 }\n            : { left: `${(100 / routes.length) * navigationState.index}%` },\n          { transform },\n          width === 'auto' ? { opacity: this.opacity } : null,\n          style,\n        ]}\n      />\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  indicator: {\n    backgroundColor: '#ffeb3b',\n    position: 'absolute',\n    left: 0,\n    bottom: 0,\n    right: 0,\n    height: 2,\n  },\n});\n"]},"metadata":{},"sourceType":"module"}