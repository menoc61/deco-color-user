{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport React, { useEffect, useState } from \"react\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Auth, DataStore } from \"aws-amplify\";\nimport { User } from \"../../models\";\nimport { useAuthContext } from \"../../contexts/AuthContext\";\nimport { useNavigation } from \"@react-navigation/native\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Profile = function Profile() {\n  var _useAuthContext = useAuthContext(),\n      dbUser = _useAuthContext.dbUser;\n\n  var _useState = useState((dbUser == null ? void 0 : dbUser.name) || \"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState((dbUser == null ? void 0 : dbUser.address) || \"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      address = _useState4[0],\n      setAddress = _useState4[1];\n\n  var _useState5 = useState((dbUser == null ? void 0 : dbUser.lat) + \"\" || \"0\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      lat = _useState6[0],\n      setLat = _useState6[1];\n\n  var _useState7 = useState((dbUser == null ? void 0 : dbUser.lng) + \"\" || \"0\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      lng = _useState8[0],\n      setLng = _useState8[1];\n\n  var _useAuthContext2 = useAuthContext(),\n      sub = _useAuthContext2.sub,\n      setDbUser = _useAuthContext2.setDbUser;\n\n  var navigation = useNavigation();\n\n  var onSave = function onSave() {\n    return _regeneratorRuntime.async(function onSave$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!dbUser) {\n              _context.next = 5;\n              break;\n            }\n\n            _context.next = 3;\n            return _regeneratorRuntime.awrap(updateUser());\n\n          case 3:\n            _context.next = 7;\n            break;\n\n          case 5:\n            _context.next = 7;\n            return _regeneratorRuntime.awrap(createUser());\n\n          case 7:\n            navigation.goBack();\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var updateUser = function updateUser() {\n    var user;\n    return _regeneratorRuntime.async(function updateUser$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regeneratorRuntime.awrap(DataStore.save(User.copyOf(dbUser, function (updated) {\n              updated.name = name;\n              updated.address = address;\n              updated.lat = parseFloat(lat);\n              updated.lng = parseFloat(lng);\n            })));\n\n          case 2:\n            user = _context2.sent;\n            setDbUser(user);\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  var createUser = function createUser() {\n    var user;\n    return _regeneratorRuntime.async(function createUser$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return _regeneratorRuntime.awrap(DataStore.save(new User({\n              name: name,\n              address: address,\n              lat: parseFloat(lat),\n              lng: parseFloat(lng),\n              sub: sub\n            })));\n\n          case 3:\n            user = _context3.sent;\n            setDbUser(user);\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            Alert.alert(\"Error\", _context3.t0.message);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, null, [[0, 7]], Promise);\n  };\n\n  return _jsxs(SafeAreaView, {\n    children: [_jsx(Text, {\n      style: styles.title,\n      children: \"Profile\"\n    }), _jsx(TextInput, {\n      value: name,\n      onChangeText: setName,\n      placeholder: \"Name\",\n      style: styles.input\n    }), _jsx(TextInput, {\n      value: address,\n      onChangeText: setAddress,\n      placeholder: \"Address\",\n      style: styles.input\n    }), _jsx(TextInput, {\n      value: lat,\n      onChangeText: setLat,\n      placeholder: \"Latitude\",\n      style: styles.input,\n      keyboardType: \"numeric\"\n    }), _jsx(TextInput, {\n      value: lng,\n      onChangeText: setLng,\n      placeholder: \"Longitude\",\n      style: styles.input\n    }), _jsx(Button, {\n      onPress: onSave,\n      title: \"Save\"\n    }), _jsx(Text, {\n      onPress: function onPress() {\n        return Auth.signOut();\n      },\n      style: {\n        textAlign: \"center\",\n        color: \"red\",\n        margin: 10\n      },\n      children: \"Sign out\"\n    })]\n  });\n};\n\nvar styles = StyleSheet.create({\n  title: {\n    fontSize: 30,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    margin: 10\n  },\n  input: {\n    margin: 10,\n    backgroundColor: \"white\",\n    padding: 15,\n    borderRadius: 5\n  }\n});\nexport default Profile;","map":{"version":3,"names":["React","useEffect","useState","SafeAreaView","Auth","DataStore","User","useAuthContext","useNavigation","Profile","dbUser","name","setName","address","setAddress","lat","setLat","lng","setLng","sub","setDbUser","navigation","onSave","updateUser","createUser","goBack","save","copyOf","updated","parseFloat","user","Alert","alert","message","styles","title","input","signOut","textAlign","color","margin","StyleSheet","create","fontSize","fontWeight","backgroundColor","padding","borderRadius"],"sources":["C:/Users/MENO/Desktop/PROJECT/APP-DECO-COLOR/deco-color-user/src/screens/ProfileScreen/index.js"],"sourcesContent":["import { View, Text, TextInput, StyleSheet, Button, Alert } from \"react-native\";\nimport React, { useEffect, useState } from \"react\";\nimport { SafeAreaView } from \"react-native-safe-area-context\";\nimport { Auth, DataStore } from \"aws-amplify\";\nimport { User } from \"../../models\";\nimport { useAuthContext } from \"../../contexts/AuthContext\";\nimport { useNavigation } from \"@react-navigation/native\";\n\nconst Profile = () => {\n  const { dbUser } = useAuthContext();\n\n  const [name, setName] = useState(dbUser?.name || \"\");\n  const [address, setAddress] = useState(dbUser?.address || \"\");\n  const [lat, setLat] = useState(dbUser?.lat + \"\" || \"0\");\n  const [lng, setLng] = useState(dbUser?.lng + \"\" || \"0\");\n\n  const { sub, setDbUser } = useAuthContext();\n\n  const navigation = useNavigation();\n\n  const onSave = async () => {\n    if (dbUser) {\n      await updateUser();\n    } else {\n      await createUser();\n    }\n    navigation.goBack();\n  };\n\n  const updateUser = async () => {\n    const user = await DataStore.save(\n      User.copyOf(dbUser, (updated) => {\n        updated.name = name;\n        updated.address = address;\n        updated.lat = parseFloat(lat);\n        updated.lng = parseFloat(lng);\n      })\n    );\n    setDbUser(user);\n  };\n\n  const createUser = async () => {\n    try {\n      const user = await DataStore.save(\n        new User({\n          name,\n          address,\n          lat: parseFloat(lat),\n          lng: parseFloat(lng),\n          sub,\n        })\n      );\n      setDbUser(user);\n    } catch (e) {\n      Alert.alert(\"Error\", e.message);\n    }\n  };\n\n  return (\n    <SafeAreaView>\n      <Text style={styles.title}>Profile</Text>\n      <TextInput\n        value={name}\n        onChangeText={setName}\n        placeholder=\"Name\"\n        style={styles.input}\n      />\n      <TextInput\n        value={address}\n        onChangeText={setAddress}\n        placeholder=\"Address\"\n        style={styles.input}\n      />\n      <TextInput\n        value={lat}\n        onChangeText={setLat}\n        placeholder=\"Latitude\"\n        style={styles.input}\n        keyboardType=\"numeric\"\n      />\n      <TextInput\n        value={lng}\n        onChangeText={setLng}\n        placeholder=\"Longitude\"\n        style={styles.input}\n      />\n      <Button onPress={onSave} title=\"Save\" />\n      <Text\n        onPress={() => Auth.signOut()}\n        style={{ textAlign: \"center\", color: \"red\", margin: 10 }}\n      >\n        Sign out\n      </Text>\n    </SafeAreaView>\n  );\n};\n\nconst styles = StyleSheet.create({\n  title: {\n    fontSize: 30,\n    fontWeight: \"bold\",\n    textAlign: \"center\",\n    margin: 10,\n  },\n  input: {\n    margin: 10,\n    backgroundColor: \"white\",\n    padding: 15,\n    borderRadius: 5,\n  },\n});\n\nexport default Profile;\n"],"mappings":";;;;;;;;AACA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,YAAT,QAA6B,gCAA7B;AACA,SAASC,IAAT,EAAeC,SAAf,QAAgC,aAAhC;AACA,SAASC,IAAT;AACA,SAASC,cAAT;AACA,SAASC,aAAT,QAA8B,0BAA9B;;;;AAEA,IAAMC,OAAO,GAAG,SAAVA,OAAU,GAAM;EACpB,sBAAmBF,cAAc,EAAjC;EAAA,IAAQG,MAAR,mBAAQA,MAAR;;EAEA,gBAAwBR,QAAQ,CAAC,CAAAQ,MAAM,QAAN,YAAAA,MAAM,CAAEC,IAAR,KAAgB,EAAjB,CAAhC;EAAA;EAAA,IAAOA,IAAP;EAAA,IAAaC,OAAb;;EACA,iBAA8BV,QAAQ,CAAC,CAAAQ,MAAM,QAAN,YAAAA,MAAM,CAAEG,OAAR,KAAmB,EAApB,CAAtC;EAAA;EAAA,IAAOA,OAAP;EAAA,IAAgBC,UAAhB;;EACA,iBAAsBZ,QAAQ,CAAC,CAAAQ,MAAM,QAAN,YAAAA,MAAM,CAAEK,GAAR,IAAc,EAAd,IAAoB,GAArB,CAA9B;EAAA;EAAA,IAAOA,GAAP;EAAA,IAAYC,MAAZ;;EACA,iBAAsBd,QAAQ,CAAC,CAAAQ,MAAM,QAAN,YAAAA,MAAM,CAAEO,GAAR,IAAc,EAAd,IAAoB,GAArB,CAA9B;EAAA;EAAA,IAAOA,GAAP;EAAA,IAAYC,MAAZ;;EAEA,uBAA2BX,cAAc,EAAzC;EAAA,IAAQY,GAAR,oBAAQA,GAAR;EAAA,IAAaC,SAAb,oBAAaA,SAAb;;EAEA,IAAMC,UAAU,GAAGb,aAAa,EAAhC;;EAEA,IAAMc,MAAM,GAAG,SAATA,MAAS;IAAA;MAAA;QAAA;UAAA;YAAA,KACTZ,MADS;cAAA;cAAA;YAAA;;YAAA;YAAA,iCAELa,UAAU,EAFL;;UAAA;YAAA;YAAA;;UAAA;YAAA;YAAA,iCAILC,UAAU,EAJL;;UAAA;YAMbH,UAAU,CAACI,MAAX;;UANa;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAf;;EASA,IAAMF,UAAU,GAAG,SAAbA,UAAa;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA,iCACElB,SAAS,CAACqB,IAAV,CACjBpB,IAAI,CAACqB,MAAL,CAAYjB,MAAZ,EAAoB,UAACkB,OAAD,EAAa;cAC/BA,OAAO,CAACjB,IAAR,GAAeA,IAAf;cACAiB,OAAO,CAACf,OAAR,GAAkBA,OAAlB;cACAe,OAAO,CAACb,GAAR,GAAcc,UAAU,CAACd,GAAD,CAAxB;cACAa,OAAO,CAACX,GAAR,GAAcY,UAAU,CAACZ,GAAD,CAAxB;YACD,CALD,CADiB,CADF;;UAAA;YACXa,IADW;YASjBV,SAAS,CAACU,IAAD,CAAT;;UATiB;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAnB;;EAYA,IAAMN,UAAU,GAAG,SAAbA,UAAa;IAAA;IAAA;MAAA;QAAA;UAAA;YAAA;YAAA;YAAA,iCAEInB,SAAS,CAACqB,IAAV,CACjB,IAAIpB,IAAJ,CAAS;cACPK,IAAI,EAAJA,IADO;cAEPE,OAAO,EAAPA,OAFO;cAGPE,GAAG,EAAEc,UAAU,CAACd,GAAD,CAHR;cAIPE,GAAG,EAAEY,UAAU,CAACZ,GAAD,CAJR;cAKPE,GAAG,EAAHA;YALO,CAAT,CADiB,CAFJ;;UAAA;YAETW,IAFS;YAWfV,SAAS,CAACU,IAAD,CAAT;YAXe;YAAA;;UAAA;YAAA;YAAA;YAafC,KAAK,CAACC,KAAN,CAAY,OAAZ,EAAqB,aAAEC,OAAvB;;UAbe;UAAA;YAAA;QAAA;MAAA;IAAA;EAAA,CAAnB;;EAiBA,OACE,MAAC,YAAD;IAAA,WACE,KAAC,IAAD;MAAM,KAAK,EAAEC,MAAM,CAACC,KAApB;MAAA;IAAA,EADF,EAEE,KAAC,SAAD;MACE,KAAK,EAAExB,IADT;MAEE,YAAY,EAAEC,OAFhB;MAGE,WAAW,EAAC,MAHd;MAIE,KAAK,EAAEsB,MAAM,CAACE;IAJhB,EAFF,EAQE,KAAC,SAAD;MACE,KAAK,EAAEvB,OADT;MAEE,YAAY,EAAEC,UAFhB;MAGE,WAAW,EAAC,SAHd;MAIE,KAAK,EAAEoB,MAAM,CAACE;IAJhB,EARF,EAcE,KAAC,SAAD;MACE,KAAK,EAAErB,GADT;MAEE,YAAY,EAAEC,MAFhB;MAGE,WAAW,EAAC,UAHd;MAIE,KAAK,EAAEkB,MAAM,CAACE,KAJhB;MAKE,YAAY,EAAC;IALf,EAdF,EAqBE,KAAC,SAAD;MACE,KAAK,EAAEnB,GADT;MAEE,YAAY,EAAEC,MAFhB;MAGE,WAAW,EAAC,WAHd;MAIE,KAAK,EAAEgB,MAAM,CAACE;IAJhB,EArBF,EA2BE,KAAC,MAAD;MAAQ,OAAO,EAAEd,MAAjB;MAAyB,KAAK,EAAC;IAA/B,EA3BF,EA4BE,KAAC,IAAD;MACE,OAAO,EAAE;QAAA,OAAMlB,IAAI,CAACiC,OAAL,EAAN;MAAA,CADX;MAEE,KAAK,EAAE;QAAEC,SAAS,EAAE,QAAb;QAAuBC,KAAK,EAAE,KAA9B;QAAqCC,MAAM,EAAE;MAA7C,CAFT;MAAA;IAAA,EA5BF;EAAA,EADF;AAqCD,CAvFD;;AAyFA,IAAMN,MAAM,GAAGO,UAAU,CAACC,MAAX,CAAkB;EAC/BP,KAAK,EAAE;IACLQ,QAAQ,EAAE,EADL;IAELC,UAAU,EAAE,MAFP;IAGLN,SAAS,EAAE,QAHN;IAILE,MAAM,EAAE;EAJH,CADwB;EAO/BJ,KAAK,EAAE;IACLI,MAAM,EAAE,EADH;IAELK,eAAe,EAAE,OAFZ;IAGLC,OAAO,EAAE,EAHJ;IAILC,YAAY,EAAE;EAJT;AAPwB,CAAlB,CAAf;AAeA,eAAetC,OAAf"},"metadata":{},"sourceType":"module"}