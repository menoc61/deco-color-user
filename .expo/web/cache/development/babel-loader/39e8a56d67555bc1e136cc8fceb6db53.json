{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport ServiceListItem from \"../../components/ServiceListItem\";\nimport Header from \"./Header\";\nimport styles from \"./styles\";\nimport { useRoute, useNavigation } from \"@react-navigation/native\";\nimport { DataStore } from \"aws-amplify\";\nimport { Company, Service } from \"../../models\";\nimport { useBasketContext } from \"../../contexts/BasketContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar CompanyDetailsPage = function CompanyDetailsPage() {\n  var _route$params;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      company = _useState2[0],\n      setCompany = _useState2[1];\n\n  var _useState3 = useState([]),\n      _useState4 = _slicedToArray(_useState3, 2),\n      servicees = _useState4[0],\n      setServices = _useState4[1];\n\n  var route = useRoute();\n  var navigation = useNavigation();\n  var id = (_route$params = route.params) == null ? void 0 : _route$params.id;\n\n  var _useBasketContext = useBasketContext(),\n      setBasketCompany = _useBasketContext.setCompany,\n      basket = _useBasketContext.basket,\n      basketServices = _useBasketContext.basketServices;\n\n  useEffect(function () {\n    if (!id) {\n      return;\n    }\n\n    setBasketCompany(null);\n    DataStore.query(Company, id).then(setCompany);\n    DataStore.query(Service, function (service) {\n      return service.companyID(\"eq\", id);\n    }).then(setServices);\n  }, [id]);\n  useEffect(function () {\n    setBasketCompany(company);\n  }, [company]);\n\n  if (!company) {\n    return _jsx(ActivityIndicator, {\n      size: \"large\",\n      color: \"gray\"\n    });\n  }\n\n  return _jsxs(View, {\n    style: styles.page,\n    children: [_jsx(FlatList, {\n      ListHeaderComponent: function ListHeaderComponent() {\n        return _jsx(Header, {\n          company: company\n        });\n      },\n      data: servicees,\n      renderItem: function renderItem(_ref) {\n        var item = _ref.item;\n        return _jsx(ServiceListItem, {\n          service: item\n        });\n      },\n      keyExtractor: function keyExtractor(item) {\n        return item.name;\n      }\n    }), _jsx(Ionicons, {\n      onPress: function onPress() {\n        return navigation.goBack();\n      },\n      name: \"arrow-back-circle\",\n      size: 45,\n      color: \"white\",\n      style: styles.iconContainer\n    }), basket && _jsx(Pressable, {\n      onPress: function onPress() {\n        return navigation.navigate(\"Basket\");\n      },\n      style: styles.button,\n      children: _jsxs(Text, {\n        style: styles.buttonText,\n        children: [\"Open basket (\", basketServices.length, \")\"]\n      })\n    })]\n  });\n};\n\nexport default CompanyDetailsPage;","map":{"version":3,"names":["useState","useEffect","Ionicons","ServiceListItem","Header","styles","useRoute","useNavigation","DataStore","Company","Service","useBasketContext","CompanyDetailsPage","company","setCompany","servicees","setServices","route","navigation","id","params","setBasketCompany","basket","basketServices","query","then","service","companyID","page","item","name","goBack","iconContainer","navigate","button","buttonText","length"],"sources":["C:/Users/MENO/Desktop/PROJECT/APP-DECO-COLOR/deco-color-user/src/screens/CompanyDetailsScreen/index.js"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport {\n  View,\n  FlatList,\n  ActivityIndicator,\n  Pressable,\n  Text,\n} from \"react-native\";\nimport { Ionicons } from \"@expo/vector-icons\";\nimport ServiceListItem from \"../../components/ServiceListItem\";\nimport Header from \"./Header\";\nimport styles from \"./styles\";\nimport { useRoute, useNavigation } from \"@react-navigation/native\";\nimport { DataStore } from \"aws-amplify\";\nimport { Company, Service } from \"../../models\";\nimport { useBasketContext } from \"../../contexts/BasketContext\";\n\nconst CompanyDetailsPage = () => {\n  const [company, setCompany] = useState(null);\n  const [servicees, setServices] = useState([]);\n\n  const route = useRoute();\n  const navigation = useNavigation();\n\n  const id = route.params?.id;\n\n  const {\n    setCompany: setBasketCompany,\n    basket,\n    basketServices,\n  } = useBasketContext();\n\n  useEffect(() => {\n    if (!id) {\n      return;\n    }\n    setBasketCompany(null);\n    // fetch the company with the id\n    DataStore.query(Company, id).then(setCompany);\n\n    DataStore.query(Service, (service) => service.companyID(\"eq\", id)).then(\n      setServices\n    );\n  }, [id]);\n\n  useEffect(() => {\n    setBasketCompany(company);\n  }, [company]);\n\n  if (!company) {\n    return <ActivityIndicator size={\"large\"} color=\"gray\" />;\n  }\n\n  return (\n    <View style={styles.page}>\n      <FlatList\n        ListHeaderComponent={() => <Header company={company} />}\n        data={servicees}\n        renderItem={({ item }) => <ServiceListItem service={item} />}\n        keyExtractor={(item) => item.name}\n      />\n      <Ionicons\n        onPress={() => navigation.goBack()}\n        name=\"arrow-back-circle\"\n        size={45}\n        color=\"white\"\n        style={styles.iconContainer}\n      />\n      {basket && (\n        <Pressable\n          onPress={() => navigation.navigate(\"Basket\")}\n          style={styles.button}\n        >\n          <Text style={styles.buttonText}>\n            Open basket ({basketServices.length})\n          </Text>\n        </Pressable>\n      )}\n    </View>\n  );\n};\n\nexport default CompanyDetailsPage;\n"],"mappings":";AAAA,SAASA,QAAT,EAAmBC,SAAnB,QAAoC,OAApC;;;;;;AAQA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,eAAP;AACA,OAAOC,MAAP;AACA,OAAOC,MAAP;AACA,SAASC,QAAT,EAAmBC,aAAnB,QAAwC,0BAAxC;AACA,SAASC,SAAT,QAA0B,aAA1B;AACA,SAASC,OAAT,EAAkBC,OAAlB;AACA,SAASC,gBAAT;;;;AAEA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;EAAA;;EAC/B,gBAA8BZ,QAAQ,CAAC,IAAD,CAAtC;EAAA;EAAA,IAAOa,OAAP;EAAA,IAAgBC,UAAhB;;EACA,iBAAiCd,QAAQ,CAAC,EAAD,CAAzC;EAAA;EAAA,IAAOe,SAAP;EAAA,IAAkBC,WAAlB;;EAEA,IAAMC,KAAK,GAAGX,QAAQ,EAAtB;EACA,IAAMY,UAAU,GAAGX,aAAa,EAAhC;EAEA,IAAMY,EAAE,oBAAGF,KAAK,CAACG,MAAT,qBAAG,cAAcD,EAAzB;;EAEA,wBAIIR,gBAAgB,EAJpB;EAAA,IACcU,gBADd,qBACEP,UADF;EAAA,IAEEQ,MAFF,qBAEEA,MAFF;EAAA,IAGEC,cAHF,qBAGEA,cAHF;;EAMAtB,SAAS,CAAC,YAAM;IACd,IAAI,CAACkB,EAAL,EAAS;MACP;IACD;;IACDE,gBAAgB,CAAC,IAAD,CAAhB;IAEAb,SAAS,CAACgB,KAAV,CAAgBf,OAAhB,EAAyBU,EAAzB,EAA6BM,IAA7B,CAAkCX,UAAlC;IAEAN,SAAS,CAACgB,KAAV,CAAgBd,OAAhB,EAAyB,UAACgB,OAAD;MAAA,OAAaA,OAAO,CAACC,SAAR,CAAkB,IAAlB,EAAwBR,EAAxB,CAAb;IAAA,CAAzB,EAAmEM,IAAnE,CACET,WADF;EAGD,CAXQ,EAWN,CAACG,EAAD,CAXM,CAAT;EAaAlB,SAAS,CAAC,YAAM;IACdoB,gBAAgB,CAACR,OAAD,CAAhB;EACD,CAFQ,EAEN,CAACA,OAAD,CAFM,CAAT;;EAIA,IAAI,CAACA,OAAL,EAAc;IACZ,OAAO,KAAC,iBAAD;MAAmB,IAAI,EAAE,OAAzB;MAAkC,KAAK,EAAC;IAAxC,EAAP;EACD;;EAED,OACE,MAAC,IAAD;IAAM,KAAK,EAAER,MAAM,CAACuB,IAApB;IAAA,WACE,KAAC,QAAD;MACE,mBAAmB,EAAE;QAAA,OAAM,KAAC,MAAD;UAAQ,OAAO,EAAEf;QAAjB,EAAN;MAAA,CADvB;MAEE,IAAI,EAAEE,SAFR;MAGE,UAAU,EAAE;QAAA,IAAGc,IAAH,QAAGA,IAAH;QAAA,OAAc,KAAC,eAAD;UAAiB,OAAO,EAAEA;QAA1B,EAAd;MAAA,CAHd;MAIE,YAAY,EAAE,sBAACA,IAAD;QAAA,OAAUA,IAAI,CAACC,IAAf;MAAA;IAJhB,EADF,EAOE,KAAC,QAAD;MACE,OAAO,EAAE;QAAA,OAAMZ,UAAU,CAACa,MAAX,EAAN;MAAA,CADX;MAEE,IAAI,EAAC,mBAFP;MAGE,IAAI,EAAE,EAHR;MAIE,KAAK,EAAC,OAJR;MAKE,KAAK,EAAE1B,MAAM,CAAC2B;IALhB,EAPF,EAcGV,MAAM,IACL,KAAC,SAAD;MACE,OAAO,EAAE;QAAA,OAAMJ,UAAU,CAACe,QAAX,CAAoB,QAApB,CAAN;MAAA,CADX;MAEE,KAAK,EAAE5B,MAAM,CAAC6B,MAFhB;MAAA,UAIE,MAAC,IAAD;QAAM,KAAK,EAAE7B,MAAM,CAAC8B,UAApB;QAAA,4BACgBZ,cAAc,CAACa,MAD/B;MAAA;IAJF,EAfJ;EAAA,EADF;AA2BD,CA/DD;;AAiEA,eAAexB,kBAAf"},"metadata":{},"sourceType":"module"}