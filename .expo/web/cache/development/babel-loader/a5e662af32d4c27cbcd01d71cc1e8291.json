{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { createContext, useEffect, useState, useContext } from \"react\";\nimport { Auth, DataStore } from \"aws-amplify\";\nimport { User } from \"../models\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar AuthContext = createContext({});\n\nvar AuthContextProvider = function AuthContextProvider(_ref) {\n  var _authUser$attributes;\n\n  var children = _ref.children;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      authUser = _useState2[0],\n      setAuthUser = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      dbUser = _useState4[0],\n      setDbUser = _useState4[1];\n\n  var sub = authUser == null ? void 0 : (_authUser$attributes = authUser.attributes) == null ? void 0 : _authUser$attributes.sub;\n  useEffect(function () {\n    Auth.currentAuthenticatedUser({\n      bypassCache: true\n    }).then(setAuthUser);\n  }, []);\n  useEffect(function () {\n    DataStore.query(User, function (user) {\n      return user.sub(\"eq\", sub);\n    }).then(function (users) {\n      return setDbUser(users[0]);\n    });\n  }, [sub]);\n  return _jsx(AuthContext.Provider, {\n    value: {\n      authUser: authUser,\n      dbUser: dbUser,\n      sub: sub,\n      setDbUser: setDbUser\n    },\n    children: children\n  });\n};\n\nexport default AuthContextProvider;\nexport var useAuthContext = function useAuthContext() {\n  return useContext(AuthContext);\n};","map":{"version":3,"names":["createContext","useEffect","useState","useContext","Auth","DataStore","User","AuthContext","AuthContextProvider","children","authUser","setAuthUser","dbUser","setDbUser","sub","attributes","currentAuthenticatedUser","bypassCache","then","query","user","users","useAuthContext"],"sources":["C:/Users/MENO/Desktop/PROJECT/APP-DECO-COLOR/deco-color-user/src/contexts/AuthContext.js"],"sourcesContent":["import { createContext, useEffect, useState, useContext } from \"react\";\nimport { Auth, DataStore } from \"aws-amplify\";\nimport { User } from \"../models\";\n\nconst AuthContext = createContext({});\n\nconst AuthContextProvider = ({ children }) => {\n  const [authUser, setAuthUser] = useState(null);\n  const [dbUser, setDbUser] = useState(null);\n  const sub = authUser?.attributes?.sub;\n\n  useEffect(() => {\n    Auth.currentAuthenticatedUser({ bypassCache: true }).then(setAuthUser);\n  }, []);\n\n  useEffect(() => {\n    DataStore.query(User, (user) => user.sub(\"eq\", sub)).then((users) =>\n      setDbUser(users[0])\n    );\n  }, [sub]);\n\n  return (\n    <AuthContext.Provider value={{ authUser, dbUser, sub, setDbUser }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthContextProvider;\n\nexport const useAuthContext = () => useContext(AuthContext);\n"],"mappings":";AAAA,SAASA,aAAT,EAAwBC,SAAxB,EAAmCC,QAAnC,EAA6CC,UAA7C,QAA+D,OAA/D;AACA,SAASC,IAAT,EAAeC,SAAf,QAAgC,aAAhC;AACA,SAASC,IAAT;;AAEA,IAAMC,WAAW,GAAGP,aAAa,CAAC,EAAD,CAAjC;;AAEA,IAAMQ,mBAAmB,GAAG,SAAtBA,mBAAsB,OAAkB;EAAA;;EAAA,IAAfC,QAAe,QAAfA,QAAe;;EAC5C,gBAAgCP,QAAQ,CAAC,IAAD,CAAxC;EAAA;EAAA,IAAOQ,QAAP;EAAA,IAAiBC,WAAjB;;EACA,iBAA4BT,QAAQ,CAAC,IAAD,CAApC;EAAA;EAAA,IAAOU,MAAP;EAAA,IAAeC,SAAf;;EACA,IAAMC,GAAG,GAAGJ,QAAH,4CAAGA,QAAQ,CAAEK,UAAb,qBAAG,qBAAsBD,GAAlC;EAEAb,SAAS,CAAC,YAAM;IACdG,IAAI,CAACY,wBAAL,CAA8B;MAAEC,WAAW,EAAE;IAAf,CAA9B,EAAqDC,IAArD,CAA0DP,WAA1D;EACD,CAFQ,EAEN,EAFM,CAAT;EAIAV,SAAS,CAAC,YAAM;IACdI,SAAS,CAACc,KAAV,CAAgBb,IAAhB,EAAsB,UAACc,IAAD;MAAA,OAAUA,IAAI,CAACN,GAAL,CAAS,IAAT,EAAeA,GAAf,CAAV;IAAA,CAAtB,EAAqDI,IAArD,CAA0D,UAACG,KAAD;MAAA,OACxDR,SAAS,CAACQ,KAAK,CAAC,CAAD,CAAN,CAD+C;IAAA,CAA1D;EAGD,CAJQ,EAIN,CAACP,GAAD,CAJM,CAAT;EAMA,OACE,KAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAAEJ,QAAQ,EAARA,QAAF;MAAYE,MAAM,EAANA,MAAZ;MAAoBE,GAAG,EAAHA,GAApB;MAAyBD,SAAS,EAATA;IAAzB,CAA7B;IAAA,UACGJ;EADH,EADF;AAKD,CApBD;;AAsBA,eAAeD,mBAAf;AAEA,OAAO,IAAMc,cAAc,GAAG,SAAjBA,cAAiB;EAAA,OAAMnB,UAAU,CAACI,WAAD,CAAhB;AAAA,CAAvB"},"metadata":{},"sourceType":"module"}